# 画面一覧

## 画面構成

このアプリケーションは、競馬の馬券購入履歴を記録・管理するための以下の画面で構成されています。

---

## 📱 画面一覧表

| 画面ID | 画面名 | 概要 | 主要機能 |
|--------|--------|------|----------|
| S00 | ログイン画面 | 認証・ログイン | ユーザー認証、新規登録への遷移 |
| S01 | ホーム画面 | アプリのトップページ | ダッシュボード表示、主要機能へのナビゲーション |
| S02 | 馬券一覧画面 | 購入した馬券の一覧 | 馬券のリスト表示、検索・フィルタ、詳細への遷移 |
| S03 | 馬券登録画面 | 新規馬券の登録 | レース情報入力、馬券種別・金額入力、組み合わせ入力 |
| S04 | 馬券詳細画面 | 購入した馬券の詳細情報 | 馬券情報の閲覧、編集、削除 |
| S05 | 馬券編集画面 | 馬券情報の編集 | 払戻金額の入力、的中フラグの更新、メモの追加 |
| S06 | レース一覧画面 | 登録されたレースの一覧 | レースのリスト表示、検索・フィルタ |
| S07 | レース詳細画面 | レースの詳細情報 | レース情報の閲覧、出走馬情報、該当レースの馬券一覧 |
| S08 | レース登録/編集画面 | レース情報の登録・編集 | レース詳細情報の入力、出走馬情報の登録 |
| S09 | 統計・分析画面 | 収支統計と分析結果 | 収支グラフ、期間別集計、馬券種別別分析 |
| S10 | 設定画面 | アプリケーション設定 | ユーザー設定、データ管理 |

---

## 🎯 画面詳細

### S00: ログイン画面

**目的:** ユーザー認証を行い、アプリケーションへのアクセスを管理する

**表示内容:**
- アプリロゴ・タイトル
- ログインフォーム
  - メールアドレス入力欄
  - パスワード入力欄
- ログインボタン
- 新規登録リンク
- パスワード再設定リンク（オプション）

**認証方式:**
- メールアドレス + パスワード認証
- または、ソーシャルログイン（Google、Apple等）を検討

**主要操作:**
- ログインボタン（認証成功後、ホーム画面へ遷移）
- 新規登録リンク（新規ユーザー登録画面へ遷移）
- パスワードを忘れた場合のリンク

**バリデーション:**
- メールアドレス形式のチェック
- パスワードの入力必須チェック
- 認証失敗時のエラーメッセージ表示

**セキュリティ考慮事項:**
- パスワードのマスク表示
- ログイン試行回数の制限（ブルートフォース攻撃対策）
- HTTPS通信の必須化
- セッション管理（自動ログアウト時間の設定）

**備考:**
- 初回起動時または未ログイン時に表示
- ログイン状態はローカルストレージまたはトークンで管理
- 「ログイン状態を保持する」オプションの検討

---

### S01: ホーム画面

**目的:** アプリケーションのエントリーポイントとして、重要な情報の概要を表示

**表示内容:**
- 今月の収支サマリー（購入額、払戻額、収支、回収率）
- 最近の馬券購入履歴（直近5〜10件）
- 主要な統計情報（総馬券数、的中率）
- クイックアクション（新規馬券登録ボタン）

**主要操作:**
- 馬券登録画面への遷移
- 馬券一覧画面への遷移
- 統計・分析画面への遷移

---

### S02: 馬券一覧画面

**目的:** 登録された全ての馬券を一覧表示し、検索・絞り込みを可能にする

**表示内容:**
- 馬券のリスト（日付、競馬場、レース名、馬券種別、金額、払戻、収支）
- ページネーション
- 検索・フィルタ機能

**フィルタ項目:**
- 期間指定（年月、開始日〜終了日）
- 競馬場
- 馬券種別
- 的中/不的中
- レース名（部分一致検索）

**主要操作:**
- 馬券詳細画面への遷移
- 新規馬券登録画面への遷移
- ソート（日付、金額、払戻額）

---

### S03: 馬券登録画面

**目的:** 新しい馬券を簡単に登録できるようにする

**入力項目:**

**必須項目:**
- 開催日（日付選択）
- 競馬場（ドロップダウン）
- レース番号（数値入力）
- 購入金額

**任意項目:**
- レース名
- 馬券種別（単勝・複勝・馬連・馬単・ワイド・3連複・3連単）
- 組み合わせ（馬番入力）
- 払戻金額
- メモ・備考

**主要操作:**
- 登録ボタン（バリデーション後、DBに保存）
- キャンセルボタン（前画面に戻る）
- レース情報の自動検索（既存レースの場合は情報を自動入力）

**備考:**
- レース情報が未登録の場合、自動的にracesテーブルにも登録
- 段階的な入力を許容（最低限の情報だけで登録可能）

---

### S04: 馬券詳細画面

**目的:** 購入した馬券の詳細情報を確認する

**表示内容:**
- 馬券基本情報（日付、競馬場、レース名、レース番号）
- 馬券詳細（馬券種別、組み合わせ、購入金額、払戻金額）
- 収支情報（収支額、回収率）
- メモ・備考
- 登録日時、更新日時

**主要操作:**
- 編集ボタン（馬券編集画面へ遷移）
- 削除ボタン（確認ダイアログ後削除）
- レース詳細画面への遷移
- 戻るボタン

---

### S05: 馬券編集画面

**目的:** 登録済みの馬券情報を更新する

**編集可能項目:**
- 払戻金額
- 馬券種別
- 組み合わせ
- メモ・備考

**主要操作:**
- 保存ボタン（更新処理）
- キャンセルボタン

**備考:**
- レース情報（日付・競馬場・レース番号）は基本的に変更不可
- 変更する場合は新規登録を推奨

---

### S06: レース一覧画面

**目的:** 登録されたレースを一覧表示し、詳細確認や新規登録を行う

**表示内容:**
- レースリスト（日付、競馬場、レース番号、レース名、距離、馬場状態）
- ページネーション
- 検索・フィルタ機能

**フィルタ項目:**
- 開催日
- 競馬場
- レース名（部分一致）
- グレード（G1/G2/G3）

**主要操作:**
- レース詳細画面への遷移
- 新規レース登録画面への遷移

---

### S07: レース詳細画面

**目的:** レースの詳細情報と関連する馬券を確認する

**表示内容:**
- レース基本情報（日付、競馬場、レース番号、レース名）
- レース詳細情報（グレード、距離、芝/ダート、天候、馬場状態）
- 出走馬一覧（馬番、馬名、騎手、人気、着順、オッズ）
- このレースで購入した馬券一覧

**主要操作:**
- 編集ボタン（レース編集画面へ）
- 馬券登録ボタン（このレースの馬券を登録）
- 戻るボタン

---

### S08: レース登録/編集画面

**目的:** レース情報と出走馬情報を登録・編集する

**入力項目:**

**必須項目:**
- 開催日
- 競馬場
- レース番号

**任意項目:**
- レース名
- グレード
- 距離
- 芝/ダート
- 左/右回り
- 天候
- 馬場状態
- 出走馬情報（馬番、馬名、騎手、着順、オッズなど）

**主要操作:**
- 保存ボタン
- キャンセルボタン
- 出走馬の追加/削除

---

### S09: 統計・分析画面

**目的:** 収支や購入傾向を可視化し、振り返りを支援する

**表示内容:**

**収支統計:**
- 期間別収支グラフ（月別、年別）
- 累計収支推移
- 回収率の推移

**馬券種別分析:**
- 馬券種別ごとの購入回数
- 馬券種別ごとの的中率
- 馬券種別ごとの収支

**競馬場分析:**
- 競馬場別の購入回数
- 競馬場別の的中率
- 競馬場別の収支

**その他統計:**
- 総馬券購入数
- 総購入金額
- 総払戻金額
- 平均購入金額
- 全体的中率

**主要操作:**
- 期間フィルタ（全期間、今年、今月、カスタム期間）
- グラフの切り替え

---

### S10: 設定画面

**目的:** アプリケーションの設定とデータ管理

**設定項目:**
- 表示設定（テーマ、言語）
- データのエクスポート（CSV/JSON）
- データのインポート
- データベースのバックアップ
- アプリ情報（バージョン情報）

**主要操作:**
- 各種設定の変更
- データのエクスポート/インポート

---

## 📝 補足事項

### 画面設計の方針

1. **シンプルな導線**
   - 最小限のステップで馬券を登録できる
   - よく使う機能はホーム画面から1タップでアクセス可能

2. **段階的な情報入力**
   - 必須情報だけで登録可能
   - 詳細情報は後から追加できる

3. **振り返りやすさ**
   - 過去の馬券を簡単に検索・フィルタリング
   - 収支や傾向を視覚的に把握できる

4. **データの整合性**
   - レース情報は自動的に管理
   - 重複レース登録を防止

---

**最終更新:** 2025-10-19
